 <!-- manual page source format generated by PolyglotMan v3.0.7, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>NUPN manual page</TITLE>
</HEAD>
<BODY bgcolor="white" fgcolor="black">
<A HREF="#toc">Table of Contents</A><P>
  
<H2><A NAME="sect0" HREF="#sect0">Name</A></H2>
nupn, NUPN - Nested-Unit Petri Nets 
<H2><A NAME="sect1" HREF="#sect1">Description</A></H2>
<P>
Nested-Unit Petri Nets
(NUPN, for short) are a theoretical model of concurrency. Technically, they
extend ordinary, one-safe Petri Nets with structure and locality, by grouping
sets of places into hierarchically nested "units". This semantic model is
particularly suitable when translating specifications written in high-level
concurrent languages (such as process calculi), as structural information
can be preserved to make later analyses more efficient and scalable. For
further details, refer to the [Gar19] paper listed below in the BIBLIOGRAPHY
section. <P>
In practice, the theoretical NUPN model is implemented in two different
ways: 
<UL>
<LI type=disc>An NUPN-specific extension of the standard PNML format has been proposed
in December 2015. This extension is documented by the <A HREF="http://mcc.lip6.fr/nupn.php">http://mcc.lip6.fr/nupn.php</A>

page and is supported by many model checkers, among which ITS-Tools (Paris),
LTSmin (Twente), and PNMC (Toulouse). Models encoded using this extension
of PNML are stored in files having the <B>.pnml</B> suffix. </LI><P><LI type=disc>Alternately, a simple
file format for representing NUPN models has been present in the CADP toolbox
since July 2004 with gradual evoluations. This format was designed to be
readable by humans, as well as easy to generate and parse using tools. Models
encoded using this format are stored in files having the <B>.nupn</B> suffix. </LI><P>
</UL>
<P>
The
remainder of this manual page defines the latter format, which is referred
to as the "NUPN format". <P>
Conversion from PNML to NUPN can be done using
the PNML2NUPN tool (see below), whereas conversion from NUPN to PNML (with
NUPN-specific extension) can be achieved by invoking the <A HREF="caesar.bdd.html"><B>caesar.bdd</B></A>

tool with its <B>-pnml</B> option. 
<H2><A NAME="sect2" HREF="#sect2">Syntax of the NUPN Format</A></H2>
The format of <I>filename</I><B>.nupn</B>
is defined by the following BNF  grammar (where <CODE>&lt;element&gt;?</CODE> denotes zero or
one ocurrences of  <CODE>&lt;element&gt;</CODE>, where <CODE>&lt;element&gt;*</CODE> denotes zero or many occurrences
of <CODE>&lt;element&gt;</CODE>, and where "nb" stands for "number"):  <PRE>&lt;nested-unit-petri-net&gt; ::= 
   &lt;pragma-description&gt;*
   places #&lt;nb-of-places&gt; &lt;min-place-nb&gt;...&lt;max-place-nb&gt;\n
   &lt;initial-marking-description&gt;
   units #&lt;nb-of-units&gt; &lt;min-unit-nb&gt;...&lt;max-unit-nb&gt;\n
   root unit &lt;root-unit-nb&gt;\n
   &lt;unit-description&gt;*\n
   transitions #&lt;nb-of-trans&gt; &lt;min-trans-nb&gt;...&lt;max-trans-nb&gt;\n
   &lt;trans-description&gt;*\n
   &lt;label-description&gt;?
</PRE><PRE>&lt;pragma-description&gt; ::= !&lt;character-string&gt;\n
</PRE><PRE>&lt;initial-marking-description&gt; ::=
   initial place &lt;init-place-nb&gt;\n
 | initial places #&lt;nb-of-initial-places&gt; &lt;initial-place-list&gt;\n
</PRE><PRE>&lt;unit-description&gt; ::=
   U&lt;unit-nb&gt;
   #&lt;nb-of-subplaces&gt; &lt;min-subplace-nb&gt;...&lt;max-subplace-nb&gt;
   #&lt;nb-of-subunits&gt; &lt;subunit-list&gt;\n
</PRE><PRE>&lt;trans-description&gt; ::=
   T&lt;trans-nb&gt; 
   #&lt;nb-of-input-places&gt; &lt;input-place-list&gt;
   #&lt;nb-of-output-places&gt; &lt;output-place-list&gt;\n
</PRE><PRE>&lt;label-description&gt; ::=
   labels &lt;place-flag&gt; &lt;trans-flag&gt; &lt;unit-flag&gt; &lt;label-length&gt;\n
   &lt;place-label&gt;*
   &lt;trans-label&gt;*
   &lt;unit-label&gt;*
</PRE><PRE>&lt;place-label&gt; ::= p&lt;place-nb&gt; &lt;label&gt;\n
&lt;trans-label&gt; ::= t&lt;trans-nb&gt; &lt;label&gt;\n
&lt;unit-label&gt;  ::= u&lt;unit-nb&gt; &lt;label&gt;\n
</PRE><PRE>&lt;initial-place-list&gt;   ::= &lt;place-nb&gt;*
&lt;input-place-list&gt;     ::= &lt;place-nb&gt;*
&lt;output-place-list&gt;    ::= &lt;place-nb&gt;*
&lt;subunit-list&gt;         ::= &lt;unit-nb&gt;*
</PRE><PRE>&lt;nb-of-places&gt;         ::= &lt;unsigned-integer&gt;
&lt;min-place-nb&gt;         ::= &lt;unsigned-integer&gt;
&lt;max-place-nb&gt;         ::= &lt;unsigned-integer&gt;
&lt;init-place-nb&gt;        ::= &lt;unsigned-integer&gt;
&lt;place-nb&gt;             ::= &lt;unsigned-integer&gt;
&lt;nb-of-units&gt;          ::= &lt;unsigned-integer&gt;
&lt;min-unit-nb&gt;          ::= &lt;unsigned-integer&gt;
&lt;max-unit-nb&gt;          ::= &lt;unsigned-integer&gt;
&lt;root-unit-nb&gt;         ::= &lt;unsigned-integer&gt;
&lt;unit-nb&gt;              ::= &lt;unsigned-integer&gt;
&lt;nb-of-trans&gt;          ::= &lt;unsigned-integer&gt;
&lt;min-trans-nb&gt;         ::= &lt;unsigned-integer&gt;
&lt;max-trans-nb&gt;         ::= &lt;unsigned-integer&gt;
&lt;nb-of-subplaces&gt;      ::= &lt;unsigned-integer&gt;
&lt;min-subplace-nb&gt;      ::= &lt;unsigned-integer&gt;
&lt;max-subplace-nb&gt;      ::= &lt;unsigned-integer&gt;
&lt;nb-of-subunits&gt;       ::= &lt;unsigned-integer&gt;
&lt;trans-nb&gt;             ::= &lt;unsigned-integer&gt;
&lt;nb-of-input-places&gt;   ::= &lt;unsigned-integer&gt;
&lt;nb-of-output-places&gt;  ::= &lt;unsigned-integer&gt;
&lt;label-length&gt;         ::= &lt;unsigned-integer&gt;
</PRE><PRE>&lt;place-flag&gt;           ::= 0 | 1
&lt;trans-flag&gt;           ::= 0 | 1
&lt;unit-flag&gt;            ::= 0 | 1
</PRE><PRE>&lt;label&gt;                ::= &lt;character-string&gt;
</PRE><P>
In order to keep the NUPN format simple and easy to process using script
languages (such as Awk), the rules for spacing are strict: tabulations
are prohibited; multiple spaces are not allowed where a single space is;
spaces are not permitted at the beginning or end of a line; empty or blank
lines are forbidden. <P>
Note 1: inserting spaces just after "!" and "#", or
around "..." is not  permitted by the syntax.  <P>
Note 2: in &lt;initial-marking-description&gt;,
the first form: <PRE>   initial place &lt;init-place-nb&gt;\n
</PRE>is a shorthand for the second form and, namely, is equivalent to: <PRE>   initial places #1 &lt;init-place-nb&gt;\n
</PRE>The first form is an early syntax, kept for backward compatibility reasons.
In the sequel, we may only consider the second form. <P>
Note 3: unless otherwise
stated, all &lt;unsigned-integer&gt; values are assumed to be smaller than 2^31. 
<H2><A NAME="sect3" HREF="#sect3">Static
Semantics of the NUPN Format</A></H2>
A few preliminary definitions are needed: 
<UL>
<LI type=disc>Let
Length (L) denote the length of a list L whose elements belong to the syntactic
categories &lt;place-nb&gt; or &lt;unit-nb&gt;; the length of an empty list is zero. </LI><P><LI type=disc>Let Unit
(&lt;place-nb&gt;) be the &lt;unit-nb&gt; associated with the &lt;unit-description&gt; whose interval
&lt;min-subplace-nb&gt;...&lt;max-subplace-nb&gt; contains &lt;place-nb&gt;. </LI><P><LI type=disc>Let Sub (u1, u2) be the predicate
that is true iff the unit numbered u1 is a sub-unit of the unit numbered
u2, i.e., iff there exists a &lt;unit-description&gt; whose &lt;unit-nb&gt; is u2 and whose
&lt;subunit-list&gt; contains u1. </LI><P><LI type=disc>Let Sub* (u1, u2) be the transitive closure of
Sub (u1, u2), i.e., the predicate that is true iff the unit numbered u1 is
transitively included in (but not equal to) the unit numbered u2. </LI><P><LI type=disc>Let Disjoint
(u1, u2) be the predicate that is true iff both units numbered u1 and u2
are neither equal nor transitively included in each other, i.e., iff (u1
&lt;&gt; u2) and not Sub* (u1, u2) and not Sub* (u2, u1). </LI><P>
</UL>
<P>
A valid NUPN file should
satisfy the following constraints: <PRE>In &lt;nested-unit-petri-net&gt;:
  1.  &lt;nb-of-places&gt; &gt; 0     -- a net has at least one place
  2.  &lt;max-place-nb&gt; - &lt;min-place-nb&gt; + 1 = &lt;nb-of-places&gt;
  3.  &lt;nb-of-units&gt; &gt; 0     -- a net has at least one unit
  4.  &lt;max-unit-nb&gt; - &lt;min-unit-nb&gt; + 1 = &lt;nb-of-units&gt;
  5.  &lt;min-unit-nb&gt; &lt;= &lt;root-unit-nb&gt; &lt;= &lt;max-unit-nb&gt;
  6.  &lt;nb-of-trans&gt; &gt;= 0    -- a net may have zero transition
  7.  &lt;nb-of-trans&gt; = 0 =&gt; &lt;min-trans-nb&gt; = 1 and &lt;max-trans-nb&gt; = 0
      -- the empty interval of transitions is canonically noted 1...0
  8.  &lt;max-trans-nb&gt; - &lt;min-trans-nb&gt; + 1 = &lt;nb-of-trans&gt;
</PRE><PRE>In &lt;initial-marking-description&gt;:
  9.  &lt;min-place-nb&gt; &lt;= &lt;init-place-nb&gt; &lt;= &lt;max-place-nb&gt;
 10.  0 &lt;= &lt;nb-of-initial-places&gt; &lt;= &lt;nb-of-places&gt;
 11.  Length (&lt;initial-place-list&gt;) = &lt;nb-of-initial-places&gt;
 12.  for each pair &lt;place-nb&gt; and &lt;place-nb&gt;' in &lt;initial-place-list&gt;
      one must have: Disjoint (Unit (&lt;place-nb&gt;), Unit (&lt;place-nb&gt;'))
      -- the initial places must belong to disjoint units (and are
      -- thus pairwise distinct); see discussion below about this rule
</PRE><PRE>In each &lt;unit-description&gt;:
 13.  &lt;min-unit-nb&gt; &lt;= &lt;unit-nb&gt; &lt;= &lt;max-unit-nb&gt;
 14.  0 &lt;= &lt;nb-of-subplaces&gt; &lt;= &lt;nb-of-places&gt;
 15.  &lt;nb-of-subplaces&gt; = 0 =&gt; &lt;min-subplace-nb&gt; = 1
                           and &lt;max-subplace-nb&gt; = 0
      -- the empty interval of places is canonically noted 1...0
 16.  &lt;min-place-nb&gt; &lt;= &lt;min-subplace-nb&gt; &lt;= &lt;max-place-nb&gt;
 17.  &lt;min-place-nb&gt; &lt;= &lt;max-subplace-nb&gt; &lt;= &lt;max-place-nb&gt;
 18.  &lt;max-subplace-nb&gt; - &lt;min-sublace-nb&gt; + 1 = &lt;nb-of-subplaces&gt;
 19.  0 &lt;= &lt;nb-of-subunits&gt; &lt;= &lt;nb-of-units&gt;
 20.  Length (&lt;subunit-list&gt;) = &lt;nb-of-subunits&gt;
</PRE><PRE>Globally to all &lt;unit-description&gt;s:
 21.  each &lt;unit-nb&gt; occurs once and only once after a "U"
 22.  the sum of all &lt;nb-of-subplaces&gt; is equal to &lt;nb-of-places&gt;
 23.  all intervals &lt;min-subplace-nb&gt;...&lt;max-subplace-nb&gt; form
      a partition of &lt;min-place-nb&gt;...&lt;max-place-nb&gt;
 24.  the sum of all &lt;nb-of-subunits&gt; is equal to &lt;nb-of-units&gt; - 1
 25.  &lt;root-unit-number&gt; and all non-empty &lt;subunit-list&gt;s form
      a partition of &lt;min-unit-nb&gt;...&lt;max-unit-nb&gt;
</PRE><PRE>In each &lt;subunit-list&gt;:
 26.  &lt;min-unit-nb&gt; &lt;= &lt;unit-nb&gt; &lt;= &lt;max-unit-nb&gt;
 27.  &lt;unit-nb&gt; != &lt;root-unit-nb&gt; -- the root unit is not a
                                  -- sub-unit of any other unit
</PRE><PRE>In each &lt;trans-description&gt;:
 28.  &lt;min-trans-nb&gt; &lt;= &lt;trans-nb&gt; &lt;= &lt;max-trans-nb&gt;
 29.  0 &lt;= &lt;nb-of-input-places&gt; &lt;= &lt;nb-of-places&gt;
 30.  Length (&lt;input-place-list&gt;) = &lt;nb-of-input-places&gt;
 31.  0 &lt;= &lt;nb-of-output-places&gt; &lt;= &lt;nb-of-places&gt;
 32.  Length (&lt;output-place-list&gt;) = &lt;nb-of-output-places&gt;
 33.  &lt;input-place-list&gt; is included in &lt;output-place-list&gt;
      =&gt; &lt;input-place-list&gt; is equal to &lt;output-place-list&gt;
      -- see discussion below about this rule
</PRE><PRE>Globally to all &lt;trans-description&gt;s:
 34.  each &lt;trans-nb&gt; occurs once and only once after a "T"
</PRE><PRE>In each &lt;input-place-list&gt; and each &lt;output-place-list&gt;:
 35.  &lt;min-place-nb&gt; &lt;= &lt;place-nb&gt; &lt;= &lt;max-place-nb&gt;
 36.  for each pair &lt;place-nb&gt; and &lt;place-nb&gt;' in the list, one
      must have: Disjoint (Unit (&lt;place-nb&gt;), Unit (&lt;place-nb&gt;'))
      -- the input (resp. output) places of each transition must
      -- belong to disjoint units (and are thus pairwise distinct);
      -- see discussion below about this rule
</PRE><PRE>In &lt;label-description&gt;:
 37. if &lt;place-flag&gt; = 0, there are no occurrences of &lt;place-label&gt;
     -- places are not labelled
 38. if &lt;place-flag&gt; = 1, there are &lt;nb-of-places&gt; occurrences of
     &lt;place-label&gt; -- all places are labelled
 39. if &lt;trans-flag&gt; = 0, there are no occurrences of &lt;trans-label&gt;
     -- transitions are not labelled
 40. if &lt;trans-flag&gt; = 1, there are &lt;nb-of-trans&gt; occurrences of
     &lt;trans-label&gt; -- all transitions are labelled
 41. &lt;nb-of-trans&gt; = 0 =&gt; &lt;trans-flag&gt; = 0
 42. if &lt;unit-flag&gt; = 0, there are no occurrences of &lt;unit-label&gt;
     -- units are not labelled
 43. if &lt;unit-flag&gt; = 1, there are &lt;nb-of-units&gt; occurrences of
     &lt;unit-label&gt; -- all units are labelled
</PRE><PRE>In each &lt;place-label&gt;:
 44. &lt;min-place-nb&gt; &lt;= &lt;place-nb&gt; &lt;= &lt;max-place-nb&gt;
</PRE><PRE>Globally to all &lt;place-label&gt;s:
 45. each &lt;place-nb&gt; occurs once and only once after a "p"
     -- thus all &lt;place-nb&gt;s are pairwise distinct, but it is not
     -- required that all &lt;character-string&gt;s are pairwise distinct
</PRE><PRE>In each &lt;trans-label&gt;:
 46. &lt;min-trans-nb&gt; &lt;= &lt;trans-nb&gt; &lt;= &lt;max-trans-nb&gt;
</PRE><PRE>Globally to all &lt;trans-label&gt;s:
 47. each &lt;trans-nb&gt; occurs once and only once after a "t"
     -- thus all &lt;trans-nb&gt;s are pairwise distinct, but it is not
     -- required that all &lt;character-string&gt;s are pairwise distinct
</PRE><PRE>In each &lt;unit-label&gt;:
 48. &lt;min-unit-nb&gt; &lt;= &lt;unit-nb&gt; &lt;= &lt;max-unit-nb&gt;
</PRE><PRE>Globally to all &lt;unit-label&gt;s:
 49. each &lt;unit-nb&gt; occurs once and only once after a "u"
     -- thus all &lt;unit-nb&gt;s are pairwise distinct, but it is not
     -- required that all &lt;character-string&gt;s are pairwise distinct
</PRE><PRE>In each &lt;label&gt;:
 50. strlen (&lt;character-string&gt;) &lt;= &lt;label-length&gt;
</PRE><P>
Note 1: It is possible that: <PRE>   &lt;nb-of-units&gt; &lt;= &lt;nb-of-places&gt;
</PRE>in the case, e.g., where all places are contained in one single unit. Conversely,
it is also possible that: <PRE>   &lt;nb-of-places&gt; &lt;= &lt;nb-of-units&gt;
</PRE>in the case, e.g., where each place is contained in a specific unit. <P>
Note
2: when there is a single initial place, it is often in the root unit,
but this is not mandatory (this would be even impossible when the root
unit has no local place). <P>
Note 3: as stated in constraints 46, 49, and 52,
the labelling of places, transitions, and units is not necessarily injective.
For instance, several transitions may share the same label (e.g., the label
"i" used to denote  internal transitions in concurrent languages such as
LOTOS and LNT). 
<H2><A NAME="sect4" HREF="#sect4">Dynamic Semantics of the NUPN Format</A></H2>
The dynamic semantics
of Nested-Unit Petri Nets follows the same rules as Petri Nets that are
ordinary (i.e., all arcs have multiplicity one) and safe (i.e., each place
contains at most one token): 
<UL>
<LI type=disc>Initially, only the initial places (which
are defined in the &lt;initial-marking-description&gt;) have a token. </LI><P><LI type=disc>A transition
can fire iff all its input places have a token. </LI><P><LI type=disc>When a transition fires,
its input places lose their token and its output place get a token. </LI><P>
</UL>
<P>
Additionally,
each reachable marking M should satisfy the "unit safe" property, which
is defined as follows: 
<OL>
<LI>If M has a token in some place P, then M has no
token in any other place P' local to the same unit as P, i.e., Unit (P) =
Unit (P'). The particular case where P=P' prohibits having two tokens in the
same place, thus implying that the net is one-safe. </LI><P><LI>If M has a token in some
place P local to U = Unit (P), there is no token in any place local to
any other unit U' that transitively contains U or is transitively contained
in U, i.e., Sub* (U, U') or Sub* (U', U). Said differently, if a unit is active,
all its ancestor units and descendent units are inactive.  </LI><P>
</OL>
<P>
Conditions (1)
and (2) can be summarized as follows: a marking M is unit safe iff for
each pair of places P and P' marked in M, P &lt;&gt; P' =&gt; Disjoint (Unit (P), Unit
(P')). <P>
Deciding whether all reachable markings of a NUPN model are unit safe
requires, in general, to build the graph of reachable markings. However,
some structural checks allow to detect, on the basis of sufficient conditions,
certain NUPN models that are likely not to be unit safe. This is the case
of three aforementioned rules of the static semantics: 
<UL>
<LI type=disc>Rule 12 checks that
the initial marking is unit safe. </LI><P><LI type=disc>Rule 34 warns about transitions T whose
input places are a strict subset of output places, as such transitions,
if fireable, would accumulate an infinite number of tokens in their output
places that are not input places. </LI><P><LI type=disc>Rule 37 checks, for each transition T,
that the set of input places of T is unit safe (otherwise, T could not
fire from any unit safe marking) and that the set of output places of T
is unit safe too (otherwise, firing T would produce markings that would
not be unit safe). </LI><P>
</UL>
<P>
Note: it is neither required that a NUPN is connected,
nor that all places can be reachable from the initial marking, nor that
all transitions are quasi-live (i.e., can be fired from at least one reachable
marking). However,  <B>caesar.bdd </B> invoked with option <B>-check</B> warns about
such situations. 
<H2><A NAME="sect5" HREF="#sect5">Supported Pragmas of the NUPN Format</A></H2>
Pragmas provide optional
information about a NUPN model. If present, pragmas occur at the very beginning
of a NUPN file; they always start with the "!" character and terminate
with the end of the line. The following pragmas are currently supported:

<H3><A NAME="sect6" HREF="#sect6">Pragma "creator"</A></H3>
The syntax of this pragma is: <BR>
<PRE>   !creator &lt;character-string&gt;
</PRE><P>
&lt;character-string&gt; should contain the name of the tool that produced the NUPN
file, possibly followed by the version number of this tool and (if relevant)
the command-line options given to this tool when it was invoked. This pragma
is mostly intended for traceability. 
<H3><A NAME="sect7" HREF="#sect7">Pragma "unit_safe"</A></H3>
The syntax of this
pragma is either: <PRE>   !unit_safe
</PRE>or: <PRE>   !unit_safe &lt;character-string&gt;
</PRE><P>
If present, this pragma certifies that all reachable markings of the NUPN
model are unit safe. In the first form, unit safeness is certified by the
creator tool (if the "!creator" pragma is present). In the second form,
unit safeness has been certified by another tool, the name, version number,
and (if relevant) command-line options are given in &lt;character-string&gt;. 
<H3><A NAME="sect8" HREF="#sect8">Pragma
"multiple_initial_tokens"</A></H3>
The syntax of this pragma is: <BR>
<PRE>   !multiple_initial_tokens #&lt;nb-tokens&gt;
   #&lt;nb-places&gt; &lt;min&gt;...&lt;max&gt;
</PRE>As for all pragmas, these syntactic elements must appear on one single
line. <P>
&lt;nb-tokens&gt;, &lt;min&gt;, and &lt;max&gt; are unsigned integers that may be greater than
2^31 but must be smaller than 2^63. <P>
By inserting this pragma, the creator
tool indicates that the NUPN model has been derived from a original Petri
Net, in the initial marking of which certain places contain more than one
token. In the NUPN model, the initial number of tokens in such places is
implicitly reduced to one. <P>
Thus, this pragma and the <B>unit_safe</B> pragma are
mutually exclusive. <P>
The arguments of this pragma are computed, on the original
Petri Net, as follows: 
<UL>
<LI type=disc>&lt;nb-tokens&gt; gives the sum of tokens initially contained
in all the initial places (either marked with a single or multiple tokens).
</LI><P><LI type=disc>&lt;nb-places&gt; gives the number of places that initially contain multiple tokens.
</LI><P><LI type=disc>&lt;min&gt; and &lt;max&gt; give respectively the minimum (greater than one) and maximum
number of initial tokens present in the places that initially contain multiple
tokens. </LI><P>
</UL>
<P>
The following constraints should hold, where &lt;nb-of-initial-places&gt; denotes
the number of initial places given in the &lt;initial-marking-description&gt;:  
<PRE>   &lt;nb-of-initial-places&gt; + &lt;nb-places&gt; * (&lt;min&gt; - 1)
   &lt;= &lt;nb-tokens&gt; &lt;=
   &lt;nb-of-initial-places&gt; + &lt;nb-places&gt; * (&lt;max&gt; - 1)
</PRE>
<H3><A NAME="sect9" HREF="#sect9">Pragma "multiple_arcs"</A></H3>
The syntax of this pragma is: <BR>
<PRE>   !multiple_arcs
   #&lt;nb-trans-in&gt; #&lt;nb-trans-out&gt; #&lt;nb-trans-inout&gt;
   &lt;min-in&gt;...&lt;max-in&gt; &lt;min-out&gt;...&lt;max-out&gt;
   &lt;min-diff&gt;...&lt;max-diff&gt;
</PRE>As for all pragmas, these syntactic elements must appear on one single
line. <P>
By inserting this pragma, the creator tool indicates that the NUPN
model has been derived from a original Petri Net that is not ordinary,
i.e., in which certain input arcs (i.e., from a place to a transition) and/or
output arcs (i.e., from a transition to a place) have a valuation (or "inscription",
in PNML terminology) greater than one. Such arcs are called "multiple input
arcs" and "multiple output arcs", respectively. In the NUPN model, there
are no multiple arcs. <P>
Thus, this pragma and the <B>unit_safe</B> pragma are mutually
exclusive. <P>
The arguments of this pragma are computed, on the original Petri
Net, as follows: 
<UL>
<LI type=disc>&lt;nb-trans-in&gt; gives the number of transitions having at least
one multiple input arc and no multiple output arc. </LI><P><LI type=disc>&lt;nb-trans-out&gt; gives the
number of transitions having no multiple input arc and at least one multiple
output arc.  </LI><P><LI type=disc>&lt;nb-trans-inout&gt; gives the number of transitions having at least
one multiple input arc and at least one multiple output arc. At least one
among &lt;nb-trans-in&gt;, &lt;nb-trans-out&gt;, and &lt;nb-trans-inout&gt; must be non-null. </LI><P><LI type=disc>&lt;min-in&gt; and
&lt;max-in&gt; give respectively the minimum (greater than one) and maximum valuations
of multiple input arcs. In absence of such arcs (i.e., when &lt;nb-trans-in&gt; and
&lt;nb-trans-inout&gt; are both null), &lt;min-in&gt; and &lt;max-in&gt; must be equal to 1 and 0,
respectively. </LI><P><LI type=disc>&lt;min-out&gt; and &lt;max-out&gt; give respectively the minimum (greater than
one) and maximum valuations of multiple output arcs. In absence of such
arcs (i.e., when &lt;nb-trans-out&gt; and &lt;nb-trans-inout&gt; are both null), &lt;min-out&gt; and &lt;max-out&gt;
must be equal to 1 and 0, respectively. </LI><P><LI type=disc>&lt;min-diff&gt; and &lt;max-diff&gt; give the minimum
and maximum, for all transitions T, of OutVal (T) - InVal (T), where InVal
(T) and OutVal (T) denote the sum of the valuations of all input arcs arriving
in T (respectively, all output arcs going out of T). Each arc that is not
multiple is assumed to have a valuation equal to one. &lt;min-diff&gt; and &lt;max-diff&gt;
are computed on the entire set of transitions of the original Petri Net
(this set is necessarily non empty if this pragma is present). </LI><P>
</UL>

<H2><A NAME="sect10" HREF="#sect10">Example of
a NUPN File</A></H2>
This is an example of a valid NUPN file: <BR>
<PRE>   !creator caesar
   !unit_safe
   places #7 0...6
   initial place 0
   units #3 0...2
   root unit 0
   U1 #4 1...4 #0 
   U2 #2 5...6 #0 
   U0 #1 0...0 #2 1 2 
   transitions #5 0...4
   T0 #1 0 #2 1 5 
   T1 #2 3 6 #2 2 5 
   T2 #2 1 5 #2 4 6 
   T3 #1 2 #1 1 
   T4 #1 4 #1 3 
</PRE>
<H2><A NAME="sect11" HREF="#sect11">How to Create a NUPN File</A></H2>
At present, there are two ways of producing NUPN
models: 
<UL>
<LI type=disc>Using the <B>-nupn</B> option of the <A HREF="caesar.html"><B>caesar</B></A>
 compiler, which will
generate a NUPN file corresponding to the control structure of a LOTOS
specification (or any other specification, for instance, an LNT specification,
that can be translated to LOTOS). </LI><P><LI type=disc>Using the PNML2NUPN translator developed
by Lom Messan Hillah - see <A HREF="http://pnml.lip6.fr/pnml2nupn">http://pnml.lip6.fr/pnml2nupn</A>
 - which converts to
NUPN a large subset of Petri Nets encoded in the PNML standard.  Notice
that PNML models containing arcs with multiple valuations (i.e., wih PNML
"inscription" attributes greater than one) or initial places with more
than one token (i.e., with PNML "initialMarking" attributes greater than
one) cannot be easily expressed in NUPN. Also, the models generated by PNML2NUPN
are unstructured (technically, each place is contained in a particular
NUPN unit). </LI><P>
</UL>

<H2><A NAME="sect12" HREF="#sect12">How to Read a NUPN File</A></H2>
At present, there is one single CADP
tool, <A HREF="caesar.bdd.html"><B>caesar.bdd</B></A>
, that reads and processes NUPN files. This tool,
when invoked with its <B>-check</B> option, is the reference parser and semantic
checker for the NUPN format. 
<H2><A NAME="sect13" HREF="#sect13">Bibliography</A></H2>
[Gar19] Hubert Garavel. "Nested-Unit
Petri Nets". Journal of Logical and Algebraic Methods in Programming, vol.
104, pages 60-85, April 2019. Available from <A HREF="http://cadp.inria.fr/publications/Garavel-19.html">http://cadp.inria.fr/publications/Garavel-19.html</A>

[Gar15] Hubert Garavel. "Nested-Unit Petri Nets: A Structural Means to Increase
Efficiency and Scalability of Verification on Elementary Nets". In R. Devillers
and A. Valmari, editors, Proceedings of the 36th International Conference
on Application and Theory of Petri Nets and Concurrency (PETRI NETS'15),
Brussels, Belgium. Lecture Notes in Computer Science, vol. 9115, Springer,
2015. Superseded by [Gar19]. Available from <A HREF="http://cadp.inria.fr/publications/Garavel-15-a.html">http://cadp.inria.fr/publications/Garavel-15-a.html</A>


<H2><A NAME="sect14" HREF="#sect14">See Also</A></H2>
<A HREF="caesar.bdd.html"><B>caesar.bdd</B></A>
, <A HREF="caesar.html"><B>caesar</B></A>
, <A HREF="nupn_info.html"><B>nupn_info</B></A>
 <P>
Additional information
is available from the CADP Web page located at <A HREF="http://cadp.inria.fr">http://cadp.inria.fr</A>
 <P>
Directives
for installation are given in files <B>$CADP/INSTALLATION_*</B>. <P>
Recent changes
and improvements to this software are reported and commented in file <B>$CADP/HISTORY</B>.

<H2><A NAME="sect15" HREF="#sect15">Bugs</A></H2>
Please report bugs to <A HREF="mailto:cadp@inria.fr?Subject=CADP-Bug-Report">cadp@inria.fr</A> <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">Name</A></LI>
<LI><A NAME="toc1" HREF="#sect1">Description</A></LI>
<LI><A NAME="toc2" HREF="#sect2">Syntax of the NUPN Format</A></LI>
<LI><A NAME="toc3" HREF="#sect3">Static Semantics of the NUPN Format</A></LI>
<LI><A NAME="toc4" HREF="#sect4">Dynamic Semantics of the NUPN Format</A></LI>
<LI><A NAME="toc5" HREF="#sect5">Supported Pragmas of the NUPN Format</A></LI>
<UL>
<LI><A NAME="toc6" HREF="#sect6">Pragma "creator"</A></LI>
<LI><A NAME="toc7" HREF="#sect7">Pragma "unit_safe"</A></LI>
<LI><A NAME="toc8" HREF="#sect8">Pragma "multiple_initial_tokens"</A></LI>
<LI><A NAME="toc9" HREF="#sect9">Pragma "multiple_arcs"</A></LI>
</UL>
<LI><A NAME="toc10" HREF="#sect10">Example of a NUPN File</A></LI>
<LI><A NAME="toc11" HREF="#sect11">How to Create a NUPN File</A></LI>
<LI><A NAME="toc12" HREF="#sect12">How to Read a NUPN File</A></LI>
<LI><A NAME="toc13" HREF="#sect13">Bibliography</A></LI>
<LI><A NAME="toc14" HREF="#sect14">See Also</A></LI>
<LI><A NAME="toc15" HREF="#sect15">Bugs</A></LI>
</UL>
</BODY></HTML>
