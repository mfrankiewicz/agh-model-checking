  <!-- manual page source format generated by PolyglotMan v3.0.7, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>caesar_rename_1 manual page</TITLE>
</HEAD>
<BODY bgcolor="white" fgcolor="black">
<A HREF="#toc">Table of Contents</A><P>
  
<H2><A NAME="sect0" HREF="#sect0">Name</A></H2>
caesar_rename_1 - the ``rename_1'' library of OPEN/CAESAR 
<H2><A NAME="sect1" HREF="#sect1">Purpose</A></H2>
The
``rename_1'' library provides primitives for processing ``renaming files''. These
files specify which labels of a graph should be renamed, and how to rename
them, using a set of regular expressions. <P>

<H2><A NAME="sect2" HREF="#sect2">Usage</A></H2>
The ``rename_1'' library consists
of: 
<UL>
<LI type=disc>a predefined header file <CODE>caesar_rename_1.h</CODE>; </LI><P><LI type=disc>the precompiled library
file <CODE>libcaesar.a</CODE>, which implements the features described in <CODE>caesar_rename_1.h</CODE>.
</LI><P>
</UL>
<P>
Note: The ``rename_1'' library is a software layer built above the primitives
offered by the ``standard'' library. <P>

<H2><A NAME="sect3" HREF="#sect3">Renaming Files</A></H2>
In this section, we define
the format of renaming files, as they are used in the <I>CADP</I> toolbox. The
next sections will explain how the ``renaming_1'' library of <I>OPEN/CAESAR</I> supports
(and extends) this format. <P>
A renaming file is a text file containing a set
of ``renaming patterns''. There is no mandatory suffix (i.e., file extension)
for renaming files: any file name can be used; however, it is recommended
to use one of the following suffixes ``.ren'' (recommended) or ``.rename''. <P>
The syntax
of renaming files is described by the following context-free grammar: <P>
<PRE>     &lt;axiom&gt; ::= &lt;blanks&gt; &lt;header&gt; &lt;blanks&gt; \n &lt;renaming-list&gt;
 
     &lt;header&gt; ::= rename
 
     &lt;renaming-list&gt; ::= &lt;empty&gt;
                      |  &lt;renaming&gt; &lt;renaming-list&gt;
 
     &lt;renaming&gt; ::= &lt;left-pattern&gt; -&gt; &lt;right-pattern&gt; \n
 
     &lt;left-pattern&gt; ::= &lt;blanks&gt; &lt;left-regexp&gt; &lt;blanks&gt;
                     |  &lt;blanks&gt; "&lt;left-regexp&gt;" &lt;blanks&gt;
 
     &lt;right-pattern&gt; ::= &lt;blanks&gt; &lt;right-regexp&gt; &lt;blanks&gt;
                      |  &lt;blanks&gt; "&lt;right-regexp&gt;" &lt;blanks&gt;

</PRE>where: <P>

<UL>
<LI type=disc>\<CODE>n</CODE> denotes the newline character; </LI><P><LI type=disc><CODE>&lt;blanks&gt;</CODE> is any sequence of spaces,
tabulations, carriage returns, newlines, vertical tabulations, or form
feeds; these characters are those recognised by the POSIX function <CODE>isspace()</CODE>;
they are always skipped and ignored; </LI><P><LI type=disc><CODE>&lt;empty&gt;</CODE> denotes the empty sequence;
</LI><P><LI type=disc><CODE>&lt;left-regexp&gt;</CODE> is a character string specifying a regular expression according
to the definition given in the <A HREF="regexp.html"><CODE>regexp</CODE></A>
 manual page. The <CODE>&lt;left-regexp&gt;</CODE>
may be enclosed between double quotes, which will be removed and ignored.
</LI><P><LI type=disc><CODE>&lt;right-regexp&gt;</CODE> is a character string specifying a ``replacement'' expression according
to the definition given in the manual page of the POSIX <A HREF="regexp.html"><CODE>regexp</CODE></A>
 command.
The <CODE>&lt;right-regexp&gt;</CODE> can be surrounded by double quotes, which will be removed
and ignored. </LI><P>
</UL>
<P>
Note: renaming files are case sensitive: upper-case and lower-case
letters are considered to be different. <P>
Note: in the <CODE>&lt;renaming-list&gt;</CODE>, lines
that are empty or contain only blanks will be ignored. <P>
Semantically, a renaming
file behaves as function that maps a character string S (presumably representing
the label of a transition) to another character string (the renamed label).
<P>
More precisely, the effect of a renaming file F on a character string S
is defined as follows. The <CODE>&lt;renaming-list&gt;</CODE> of S is scanned from top to bottom
in order to determine the first <CODE>&lt;left-regexp&gt;</CODE> matched by S. If this <CODE>&lt;left-regexp&gt;</CODE>
does not exist, S is kept unchanged. If it exists, S will be renamed into
the corresponding <CODE>&lt;right-regexp&gt;</CODE>. Renaming is performed according to the conventions
for text substitution defined in the POSIX command <A HREF="regexp.html"><CODE>regexp</CODE></A>
. <P>
Note:
If S matches several <CODE>&lt;left-regexp&gt;</CODE>s, only the first one is taken into account.
Renamings do not cumulate (although such behaviour can be explicitly programmed
by invoking function <CODE>CAESAR_APPLY_RENAME_1()</CODE> several times). <P>
For instance,
the following file: <P>
<PRE>   rename
   GET -&gt; PUT
   PUT -&gt; GET

</PRE>will swap the labels named <CODE>"GET"</CODE> and <CODE>"PUT"</CODE>. Similarly, the following file:
<P>
<PRE>   rename
   "PUT !\([A-Z]*\) !\([A-Z]*\)" -&gt; "PUT !\2 !\1"

</PRE>will swap the offers of <CODE>"PUT"</CODE> labels, e.g., <CODE>"PUT !ABC !XYZ"</CODE> will be renamed
into <CODE>"PUT !XYZ !ABC"</CODE>. <P>

<H2><A NAME="sect4" HREF="#sect4">Generalized Renaming Files</A></H2>
The above format for renaming
files is the one used in the <I>CADP</I> toolbox for renaming labels selectively.
The ``rename_1'' library of <I>OPEN/CAESAR</I> supports this format, while providing
additional flexibility, in several directions: <P>

<UL>
<LI type=disc>The ``rename_1'' library allows
to parameterize the definition of <CODE>&lt;header&gt;</CODE>, which can therefore be different
from <CODE>"rename"</CODE>. The value of <CODE>&lt;header&gt;</CODE> is determined by a regular expression
passed as parameter to function <CODE>CAESAR_CREATE_RENAME_1()</CODE> (see below). </LI><P><LI type=disc>The
``rename_1'' library also allows files without <CODE>&lt;header&gt;</CODE>. This special case is
obtained by giving the <CODE>NULL</CODE> value to the corresponding parameter in function
<CODE>CAESAR_CREATE_RENAME_1()</CODE>. In such case, the <CODE>&lt;axiom&gt;</CODE> of the grammar is simply
defined as <CODE>&lt;renaming-list&gt;</CODE>, which does not change the semantics. </LI><P><LI type=disc>The ``rename_1''
library allows four possibilities for renaming a character string S according
to a <CODE>&lt;left-regexp&gt;</CODE> R: <I>total matching</I> (S should match R entirely, otherwise
renaming does not occur), <I>single partial matching</I> (renaming is performed
for the first sub-string of S that matches R), <I>multiple partial matching</I>
(renaming is performed for every sub-string of S that matches R), or <I>gate
matching</I> (renaming is only performed for the first word of S and only if
this first word matches R, the remaining part of S being unchanged in any
case; the first word of S is the sub-string starting at the beginning of
S and ending at the first character <CODE>!</CODE>, <CODE>?</CODE>, <CODE>(</CODE>, space, or tabulation, if any,
or at the end of S otherwise; in the case where S is a LOTOS label, the
first word of S denotes a LOTOS gate identifier). The choice between these
possibilities is determined by the value of an actual parameter passed
to function <CODE>CAESAR_CREATE_RENAME_1()</CODE>. The renaming files used in the <I>CADP</I>
toolbox follow the total match semantics. </LI><P>
</UL>
<P>

<H2><A NAME="sect5" HREF="#sect5">Description</A></H2>
The ``rename_1'' library
allows to process one or several renaming files at the same time. Each renaming
file is read, parsed and checked; if correct, its contents are stored (under
a compiled form) in a data structure called ``renaming object''. Afterwards,
the renaming file will only be handled through a pointer to its corresponding
renaming object. <P>

<H2><A NAME="sect6" HREF="#sect6">Features</A></H2>
<P>
 <HR><BR>
 
<H3><A NAME="sect7" HREF="#sect7"><CODE>CAESAR_TYPE_RENAME_1</CODE></A></H3>
<PRE>typedef CAESAR_TYPE_ABSTRACT (...) CAESAR_TYPE_RENAME_1;

</PRE>This type denotes a pointer to the concrete representation of a renaming
object, which is supposed to be ``opaque''. <P>
 <HR><BR>
 
<H3><A NAME="sect8" HREF="#sect8"><CODE>CAESAR_CREATE_RENAME_1</CODE></A></H3>
<PRE>void CAESAR_CREATE_RENAME_1 (CAESAR_R, CAESAR_PATHNAME, CAESAR_HEADER,
                             CAESAR_KIND)
   CAESAR_TYPE_RENAME_1 *CAESAR_R;
   CAESAR_TYPE_STRING CAESAR_PATHNAME;
   CAESAR_TYPE_STRING CAESAR_HEADER;
   CAESAR_TYPE_NATURAL CAESAR_KIND;
   { ... }

</PRE>This procedure allocates a renaming object using <CODE>CAESAR_CREATE()</CODE> and assigns
its address to <CODE>*CAESAR_R</CODE>. If the allocation fails, the <CODE>NULL</CODE> value is assigned
to <CODE>*CAESAR_R</CODE>. <P>
Note: because <CODE>CAESAR_TYPE_RENAME_1</CODE> is a pointer type, any
variable <CODE>CAESAR_R</CODE> of type <CODE>CAESAR_TYPE_RENAME_1</CODE> must be allocated before
used, for instance using: <CENTER><TABLE BORDER=0>
<TR><TD ALIGN=LEFT> </TD></TR>
<TR><TD ALIGN=LEFT> <CODE>CAESAR_CREATE_RENAME_1 (&amp;CAESAR_R, ...);</CODE> </TD></TR>
<TR><TD ALIGN=LEFT> </TD></TR>
</TABLE>
</CENTER><P>
The actual
value of the formal parameter <CODE>CAESAR_PATHNAME</CODE> denotes a character string
containing the file name of the renaming file. If the file name has a suffix
(see above for a discussion about suffixes for renaming files), this suffix
should be part of the character string <CODE>CAESAR_PATHNAME</CODE> (no suffix will
be added implicitly). The renaming file referred to by <CODE>CAESAR_PATHNAME</CODE> should
exist and be readable. <P>
As a special case, if <CODE>CAESAR_PATHNAME</CODE> is equal to
<CODE>NULL</CODE>, then the renaming file will be read from the standard input. <P>
The actual
value of the formal parameter <CODE>CAESAR_HEADER</CODE> denotes a character string
containing a regular expression according to the definition given in the
manual page of the POSIX <A HREF="regexp.html"><CODE>regexp</CODE></A>
 command. This regular expression
specifies the <CODE>&lt;header&gt;</CODE> that must occur at the first line of the renaming
file. <P>
As a special case, if <CODE>CAESAR_HEADER</CODE> is equal to <CODE>NULL</CODE>, then the renaming
file should have no header line. <P>
The actual value of the formal parameter
<CODE>CAESAR_KIND</CODE> should be equal to 0 if total matching is desired, to 1 if
multiple partial matching is desired, to 2 if single partial matching is
desired, or to 3 if gate matching is desired (see above for a definition
of these terms). <P>
The renaming file is parsed: its <CODE>&lt;left-regexp&gt;</CODE>'s and <CODE>&lt;right-regexp&gt;</CODE>'s
are analyzed and stored (under a compiled form) into the renaming object
<CODE>*CAESAR_R</CODE>. <P>
So doing, various error conditions may occur: the renaming file
can not be open; it is empty, or the first line does not match the header
specified by <CODE>CAESAR_HEADER</CODE>; <CODE>CAESAR_HEADER</CODE> is not a valid regular expression;
the renaming file has syntax errors; it contains some <CODE>&lt;left-regexp&gt;</CODE> (resp.
some <CODE>right-regexp&gt;</CODE> that is not a valid regular expression (resp. replacement);
etc. In such case, a detailed error message is displayed using the <CODE>CAESAR_WARNING()</CODE>
procedure, and the <CODE>NULL</CODE> value is assigned to <CODE>*CAESAR_R</CODE>. <P>
 <HR><BR>
 
<H3><A NAME="sect9" HREF="#sect9"><CODE>CAESAR_HEADER_RENAME_1</CODE></A></H3>
<PRE>#define CAESAR_HEADER_RENAME_1 "rename"

</PRE>This macro-definition returns the standard header for the renaming files
used in the <I>CADP</I> toolbox (see above). In such case, this macro-definition
should be used as an actual value for parameter <CODE>CAESAR_HEADER</CODE> when invoking
function <CODE>CAESAR_CREATE_RENAME_1</CODE>. <P>
 <HR><BR>
 
<H3><A NAME="sect10" HREF="#sect10"><CODE>CAESAR_DELETE_RENAME_1</CODE></A></H3>
<PRE>void CAESAR_DELETE_RENAME_1 (CAESAR_R)
   CAESAR_TYPE_RENAME_1 *CAESAR_R;
   { ... }

</PRE>This procedure frees the memory space corresponding to the renaming object
pointed to by <CODE>*CAESAR_R</CODE> using <CODE>CAESAR_DELETE()</CODE>. Afterwards, the <CODE>NULL</CODE> value
is assigned to <CODE>*CAESAR_R</CODE>. <P>
 <HR><BR>
 
<H3><A NAME="sect11" HREF="#sect11"><CODE>CAESAR_APPLY_RENAME_1</CODE></A></H3>
<PRE>CAESAR_TYPE_STRING CAESAR_APPLY_RENAME_1 (CAESAR_R, CAESAR_S)
   CAESAR_TYPE_RENAME_1 CAESAR_R;
   CAESAR_TYPE_STRING CAESAR_S;
   { ... }

</PRE>This function attempts to rename the character string <CODE>CAESAR_S</CODE> according
to the renaming object pointed to by <CODE>CAESAR_R</CODE>. <P>
If renaming succeeds, this
function returns a character string containing the renamed string. The address
of this character string is left unspecified, but it is assumed to be different
from <CODE>CAESAR_S</CODE>. <P>
If renaming fails, this function returns <CODE>CAESAR_S</CODE>. It is therefore
possible to decide whether renaming succeeded or not, by comparing the
result to the second parameter passed to <CODE>CAESAR_APPLY_RENAME_1</CODE>. <P>
Note: in
any case, the contents of <CODE>CAESAR_S</CODE> will not be modified (there is no side
effect). <P>
Note: when renaming succeeds, it is not allowed to modify the character
string returned by <CODE>CAESAR_APPLY_RENAME_1()</CODE> nor to free it, for instance
using <CODE>free(3)</CODE>. <P>
Note: when renaming succeeds, the contents of the character
string returned by <CODE>CAESAR_APPLY_RENAME_1()</CODE> may be destroyed by a subsequent
call to this function. In particular, it is forbidden to call <CODE>CAESAR_APPLY_RENAME_1()</CODE>
by giving to <CODE>CAESAR_S</CODE> the value returned by a former call to <CODE>CAESAR_APPLY_RENAME_1()</CODE>
for which renaming succeeded. For instance, the following call is forbidden
in the general case: <P>
<CENTER><TABLE BORDER=0>
<TR><TD ALIGN=LEFT> </TD></TR>
<TR><TD ALIGN=LEFT> <CODE>CAESAR_APPLY_RENAME_1 (..., CAESAR_APPLY_RENAME_1 (...,
...));</CODE> </TD></TR>
<TR><TD ALIGN=LEFT> </TD></TR>
</TABLE>
</CENTER><P>
 <HR><BR>
 
<H3><A NAME="sect12" HREF="#sect12"><CODE>CAESAR_FORMAT_RENAME_1</CODE></A></H3>
<PRE>CAESAR_TYPE_FORMAT CAESAR_FORMAT_RENAME_1 (CAESAR_R, CAESAR_FORMAT)
   CAESAR_TYPE_RENAME_1 CAESAR_R;
   CAESAR_TYPE_FORMAT CAESAR_FORMAT;
   { ... }

</PRE>This function allows to control the format under which the renaming object
pointed to by <CODE>CAESAR_R</CODE> will be printed by the procedure <CODE>CAESAR_PRINT_RENAME_1()</CODE>
(see below). Currently, the following formats are available: <P>

<UL>
<LI type=disc>With format
0, information about the renaming object is displayed such as: the pathname
of the corresponding renaming file, the header (if any), the number of
patterns, the list of left and right patterns, etc. </LI><P><LI type=disc>(no other format available
yet). </LI><P>
</UL>
<P>
By default, the current format of each renaming object is initialized
to 0. <P>
When called with <CODE>CAESAR_FORMAT</CODE> between 0 and 0, this fonction sets
the current format of <CODE>CAESAR_R</CODE> to <CODE>CAESAR_FORMAT</CODE> and returns an undefined
result. <P>
When called with another value of <CODE>CAESAR_FORMAT</CODE>, this function does
not modify the current format of <CODE>CAESAR_R</CODE> but returns a result defined
as follows. If <CODE>CAESAR_FORMAT</CODE> is equal to the constant <CODE>CAESAR_CURRENT_FORMAT</CODE>,
the result is the value of the current format of <CODE>CAESAR_R</CODE>. If <CODE>CAESAR_FORMAT</CODE>
is equal to the constant <CODE>CAESAR_MAXIMAL_FORMAT</CODE>, the result is the maximal
format value (i.e., 0). In all other cases, the effect of this function is
undefined. <P>
 <HR><BR>
 
<H3><A NAME="sect13" HREF="#sect13"><CODE>CAESAR_MAX_FORMAT_RENAME_1</CODE></A></H3>
<PRE>CAESAR_TYPE_FORMAT CAESAR_MAX_FORMAT_RENAME_1 ()
   { ... }

</PRE>Caution! This function is deprecated. It should no longer be used, as it
might be removed from future versions of the <I>OPEN/CAESAR</I>. Use function <CODE>CAESAR_FORMAT_RENAME_1()</CODE>
instead, called with argument <CODE>CAESAR_MAXIMAL_FORMAT</CODE>. <P>
This function returns
the maximal format value available for printing renaming objects. <P>
 <HR><BR>
 
<H3><A NAME="sect14" HREF="#sect14"><CODE>CAESAR_PRINT_RENAME_1</CODE></A></H3>
<PRE>void CAESAR_PRINT_RENAME_1 (CAESAR_FILE, CAESAR_R)
   CAESAR_TYPE_FILE CAESAR_FILE;
   CAESAR_TYPE_RENAME_1 CAESAR_R;
   { ... }

</PRE>This procedure prints to file <CODE>CAESAR_FILE</CODE> a text containing information
about the renaming object pointed to by <CODE>CAESAR_R</CODE>. The nature of the information
is determined by the current format of the renaming object pointed to by
<CODE>CAESAR_R</CODE>. <P>
Before this procedure is called, <CODE>CAESAR_FILE</CODE> must have been properly
opened, for instance using <CODE>fopen(3)</CODE>. <P>
 <HR><BR>
 
<H2><A NAME="sect15" HREF="#sect15">Author(s)</A></H2>
Hubert Garavel 
<H2><A NAME="sect16" HREF="#sect16">Files</A></H2>
 
<DL><DD><DL COMPACT>

<DT><B>$CADP/incl/caesar_graph.h</B> </DT>
<DD>interface of the
graph module </DD><P>

<DT><B>$CADP/incl/caesar_*.h</B> </DT>
<DD>interfaces of the storage module </DD><P>

<DT><B>$CADP/bin.`arch`/libcaesar.a</B>
</DT>
<DD>object code of the storage module </DD><P>

<DT><B>$CADP/src/open_caesar/*.c</B> </DT>
<DD>source code
of various exploration modules </DD><P>

<DT><B>$CADP/com/lotos.open</B> </DT>
<DD>shell script to run
OPEN/CAESAR  </DD><P>
</DL></DD><P></DL>

<H2><A NAME="sect17" HREF="#sect17">See Also</A></H2>
Reference Manuals of OPEN/CAESAR, CAESAR, and CAESAR.ADT,
<A HREF="lotos.open.html"><B>lotos.open</B></A>
, <A HREF="caesar.html"><B>caesar</B></A>
, <A HREF="caesar.adt.html"><B>caesar.adt</B></A>
 <P>
Additional information
is available from the CADP Web page located at <A HREF="http://cadp.inria.fr">http://cadp.inria.fr</A>
 <P>
Directives
for installation are given in files <B>$CADP/INSTALLATION_*.</B> <P>
Recent changes
and improvements to this software are reported and commented in file <B>$CADP/HISTORY.</B>

<H2><A NAME="sect18" HREF="#sect18">Bugs</A></H2>
Known bugs are described in the Reference Manual of OPEN/CAESAR. Please
report new bugs to <A HREF="mailto:cadp@inria.fr?Subject=CADP-Bug-Report">cadp@inria.fr</A> <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">Name</A></LI>
<LI><A NAME="toc1" HREF="#sect1">Purpose</A></LI>
<LI><A NAME="toc2" HREF="#sect2">Usage</A></LI>
<LI><A NAME="toc3" HREF="#sect3">Renaming Files</A></LI>
<LI><A NAME="toc4" HREF="#sect4">Generalized Renaming Files</A></LI>
<LI><A NAME="toc5" HREF="#sect5">Description</A></LI>
<LI><A NAME="toc6" HREF="#sect6">Features</A></LI>
<UL>
<LI><A NAME="toc7" HREF="#sect7">CAESAR_TYPE_RENAME_1</A></LI>
<LI><A NAME="toc8" HREF="#sect8">CAESAR_CREATE_RENAME_1</A></LI>
<LI><A NAME="toc9" HREF="#sect9">CAESAR_HEADER_RENAME_1</A></LI>
<LI><A NAME="toc10" HREF="#sect10">CAESAR_DELETE_RENAME_1</A></LI>
<LI><A NAME="toc11" HREF="#sect11">CAESAR_APPLY_RENAME_1</A></LI>
<LI><A NAME="toc12" HREF="#sect12">CAESAR_FORMAT_RENAME_1</A></LI>
<LI><A NAME="toc13" HREF="#sect13">CAESAR_MAX_FORMAT_RENAME_1</A></LI>
<LI><A NAME="toc14" HREF="#sect14">CAESAR_PRINT_RENAME_1</A></LI>
</UL>
<LI><A NAME="toc15" HREF="#sect15">Author(s)</A></LI>
<LI><A NAME="toc16" HREF="#sect16">Files</A></LI>
<LI><A NAME="toc17" HREF="#sect17">See Also</A></LI>
<LI><A NAME="toc18" HREF="#sect18">Bugs</A></LI>
</UL>
</BODY></HTML>
