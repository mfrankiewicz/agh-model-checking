 <!-- manual page source format generated by PolyglotMan v3.0.7, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>MCL5 manual page</TITLE>
</HEAD>
<BODY bgcolor="white" fgcolor="black">
<A HREF="#toc">Table of Contents</A><P>
  
<H2><A NAME="sect0" HREF="#sect0">Name</A></H2>
mcl, MCL - Model Checking Language version 5 (probabilistic value-passing
modal mu-calculus) 
<H2><A NAME="sect1" HREF="#sect1">Description</A></H2>
This manual page presents the version 5 of
<I>MCL</I> (<I>Model Checking Language</I>), which is the temporal logic accepted as
input by <A HREF="evaluator5.html"><B>evaluator5</B></A>
. <I>MCL</I> version 5 conservatively extends <I>MCL</I> version
4 with a probabilistic operator specifying the probability measure of transition
sequences characterized by regular formulas. In the remainder of this page,
"<I>MCL</I>" denotes version 5 of <I>MCL</I>; see <A HREF="mcl.html"><B>mcl</B></A>
 for other versions of <I>MCL</I>.
<P>
A description of the probabilistic operator of <I>MCL</I> can be found in article
[MR18], which also presents the verification method implemented in version
5.0 of EVALUATOR. This method is based on translating the problem into the
resolution of a Linear Equation System (LES) and a Parameterized Boolean
Equation System (PBES), which are carried out simultaneously on the fly.
<P>
<I>MCL</I> formulas are interpreted over a PTS (Probabilistic Transition System)
[LS91] <I>&lt;S, A, T, P, s0&gt;</I>, where: <I>S</I> is the set of <I>states</I>, <I>A</I> is the set of <I>actions</I>
(transition labels), <I>T</I> is the <I>transition relation</I> (a subset of <I>S * A *
S</I>), <I>P</I> is the <I>probability labeling</I> (a function from <I>T</I> to  the range ]0..1]),
and <I>s0</I> is the <I>initial state</I>. A transition <I>(s1, a, s2)</I> of <I>T</I>, also written
<I>s1-a-&gt;s2</I>, indicates that the system can move from state <I>s1</I> to state <I>s2</I> by
performing action <I>a</I> with probability <I>P (s1, a, s2)</I>. For each state <I>s</I>, the
sum of the probabilities associated to its outgoing transitions <I>(s, a,
s')</I> is equal to 1. Note that this forbids the presence of sink states (deadlocks)
in the PTS, i.e., every state must have at least one outgoing transition.
<P>
The PTS must contain only labelled probabilistic transitions of the form
"<I>label</I><B>;&nbsp;prob</B> <I>%p</I>", where <I>%p</I> denotes a floating-point number in the range ]0..1]
(see the  <A HREF="bcg_steady.html"><B>bcg_steady</B></A>
 manual page for details). An LTS can be converted
into a PTS on the fly by renaming its transition labels using the <B>-rename</B>
option of <A HREF="evaluator5.html"><B>evaluator5</B></A>
 to append "<B>;&nbsp;prob</B> <I>%p</I>" suffixes. If after renaming
transition labels, the sum of the probabilities associated to the transitions
going out of a state is different from 1, these probabilities are normalized
to bring this sum to 1. If no <B>-rename</B> option is given, the LTS is converted
into a PTS by considering that, for every state, all its outgoing transitions
have equal probabilities, the sum of which is 1. 
<H2><A NAME="sect2" HREF="#sect2">Probabilistic Operator</A></H2>
The
probabilistic operator belongs to the <I>state formulas</I> of MCL. Its syntax
is defined by the following grammar: <P>
  <PRE>    "prob"
         R
    "is"
         op [ "?" ] E
    "end" "prob"

</PRE>  <P>
where <I>R</I> is a regular formula on transition sequences, <I>op</I> is a comparison
operator among "&lt;", "&lt;=", "&gt;", "&gt;=", "=", "&lt;&gt;", and <I>E</I> is a data expression of
type <CODE>real</CODE> denoting a probability. <P>
Let <I>m (s, R)</I> be the probability measure
of the transition sequences going out of a state <I>s</I> and having a prefix
satisfying the regular formula <I>R</I>. A state <I>s</I> of the PTS satisfies the "prob"
formula above iff <I>m (s, R) op v</I> holds, where <I>v</I> is the value of expression
<I>E</I>. <P>
If the optional "?" clause is present, the evaluation of the "prob" formula
on a state <I>s</I> will also display the value <I>m (s, R)</I> in addition to the Boolean
verdict (TRUE or FALSE) displayed by <A HREF="evaluator5.html"><B>evaluator5</B></A>
. <P>
The regular formula
<I>R</I> and the expression <I>E</I> may contain occurrences of free data variables defined
outside the "prob" formula. The data variables exported by <I>R</I> are neither
visible in <I>E</I>, nor exported outside the whole "prob" formula. 
<H2><A NAME="sect3" HREF="#sect3">Examples of
Probabilistic Properties</A></H2>

<H3><A NAME="sect4" HREF="#sect4">Dataless Properties</A></H3>
The "prob" operator expresses
constraints on the probability of certain sequences described using regular
formulas. The formula below specifies that the probability to send a message
along an unreliable channel and receive it finally (possibly after a finite
number of retries) is at least 90%: <P>
<PRE>    prob
        SEND . (true* . RETRY)* . RECV
    is
        &gt;= 0.9
    end prob
</PRE><P>
By combining the modalities of PDL and the "prob" operator, one can express
quantitative response properties. The formula below specifies that every
request to access a resource will be granted with probability 1 (i.e., almost
surely): <P>
<PRE>    [ true* . REQUEST ]
        prob
            true* . GRANT
        is
            &gt;= 1
        end prob
</PRE>
<H3><A NAME="sect5" HREF="#sect5">Data-handling Properties</A></H3>
MCL enables the formulation of probabilistic properties
involving data values, for instance using regular formulas with counting.
The formula below, concerning the Bounded Retransmission Protocol (BRP)
[DJJL01,MR18], evaluates the probability that the sender reports an unsuccessful
transmission (action INPUT_NOK) after more than eight chunks of the packet
have been transmitted (action REC_L): <P>
<PRE>    prob
        ((not REC_L)* . REC_L) { 8 ... } .
        (not (REC_L or INPUT_NOK))* . INPUT_NOK
    is
        &gt;= ? 0
    end prob
</PRE><P>
where the regular subformula "<I>R</I> { 8 ... }" denotes the repetition of <I>R</I> at
least 8 times (see <A HREF="mcl4.html"><B>mcl4</B></A>
 for details). This formula will be evaluated
to TRUE and <A HREF="evaluator5.html"><B>evaluator5</B></A>
 will display the computed probability, as
required by the "?" clause. <P>
More complex properties about transition sequences
having certain cumulated costs can be expressed using data-handling action
predicates and the general iteration operator "loop" on regular formulas.
The following example deals with a mutual exclusion protocol that manages
the accesses of <I>n</I> processes <I>P1</I>, ..., <I>Pn</I> to a shared resource [MS13,MR18]. The
MCL formula below computes the probability that a process <I>Pi</I> performs memory
accesses of a total cost <I>max</I> before entering its critical section (<I>Pi</I> and
<I>max</I> are assumed to be defined outside of the formula). The regular subformula
expresses that, after executing its non critical section for the first
time (action predicate "{ NCS !i }"), process <I>Pi</I> begins its entry section
and, after a number of memory accesses (action predicate "{ MU ... ?c:nat
!i }"), enters its critical section (action predicate "{ CS !"ENTER" !i
}"): <P>
<PRE>    prob
        (not { NCS !i })* . { NCS !i } .
        loop (total_cost:nat:=0) in
            (not ({ MU ... !i } or { CS !"ENTER" !i }))* .
            if total_cost &lt; max then
                { MU ... ?c:nat !i } .
                continue (total_cost + c)
            else
                exit
            end if
        end loop .
        { CS !"ENTER" !i }
    is
        &gt;= ? 0
    end prob
</PRE><P>
The "loop" subformula captures the entry section of <I>Pi</I> and requires that
it terminates when the cost of all memory accesses performed by <I>Pi</I> (accumulated
in the iteration variable <I>total_cost</I>) exceeds a given value <I>max</I>. The costs
present on transitions are captured in the <I>c</I> variable of the action predicate
"{ MU ... ?c:nat !i }" and used in the "continue" subformula to update the
value of <I>total_cost</I>. The other processes can execute freely during the entry
section of <I>Pi</I>, in particular they can overtake <I>Pi</I> by accessing their critical
sections before it. 
<H2><A NAME="sect6" HREF="#sect6">Relation to Other Probabilistic Logics</A></H2>
The "prob" operator
of MCL generalizes naturally the Until operators of classical probabilistic
branching-time logics. The Until operator of PCTL (Probabilistic Computation
Tree Logic) [HJ94] without discrete time can be expressed in MCL as follows:
<P>
<PRE>    [ F1 U F2 ]{&gt;= p} =
        prob
            (HOLDS (F1) . true)* . HOLDS (F2)
        is
            &gt;= p
        end prob
</PRE><P>
where "HOLDS (<I>F</I>)" is the testing operator of PDL (Propositional Dynamic
Logic) [FL79], defined by the MCL regular formula below: <P>
<PRE>    HOLDS (F) = if not (F) then false end if
</PRE><P>
Similarly, probabilistic versions of the two Until operators of ACTL (Action-based
Computation Tree Logic) [DV90] can be defined in MCL as follows: <P>
<PRE>    [ F1{A1} U F2 ]{&gt;= p} =
        prob
            (HOLDS (F1) . A1)* . HOLDS (F2)
        is
            &gt;= p
        end prob
    [ F1{A1} U{A2} F2 ]{&gt;= p} =
        prob
            (HOLDS (F1) . A1)* . HOLDS (F1) . A2 . HOLDS (F2)
        is
            &gt;= p
        end prob
</PRE><P>
The full Until operator of PCTL, as well as its action-based counterparts
derived from ACTL, can be expressed as follows (where <I>t</I> &gt;= 0 is the number
of ticks until <I>F2</I> holds): <P>
<PRE>    [ F1 U{&lt;= t} F2 ]{&gt;= p} =
        prob
            (HOLDS (F1) . true) { 0 ... t } . HOLDS (F2)
        is
            &gt;= p
        end prob
    [ F1{A1} U{&lt;= t} F2 ]{&gt;= p} =
        prob
            (HOLDS (F1) . A1) { 0 ... t } . HOLDS (F2)
        is
            &gt;= p
        end prob
    [ F1{A1} U{&lt;= t}{A2} F2 ]{&gt;= p} =
        prob
            (HOLDS (F1) . A1) { 0 ... t } .
            HOLDS (F1) . A2 . HOLDS (F2)
        is
            &gt;= p
        end prob
</PRE><P>
where the regular subformula "<I>R</I> { 0 ... <I>t</I> }" denotes interval counting, i.e.,
the repetition of <I>R</I> between 0 and <I>t</I> times (see <A HREF="mcl4.html"><B>mcl4</B></A>
 for details).

<H2><A NAME="sect7" HREF="#sect7">Determinization of Probabilistic Formulas</A></H2>
To ensure that the verification
of a "prob" formula on a PTS is translated correctly into the resolution
of a LES, the regular subformula <I>R</I> must be <I>deterministic</I>, meaning that
it must satisfy two conditions: 
<DL><DD><DL COMPACT>

<DT>(a) </DT>
<DD>if <I>R</I> matches a transition sequence
in the PTS, it cannot match also one of its prefixes. </DD><P>

<DT>(b) </DT>
<DD>if <I>R</I> matches a
transition sequence in the PTS, it does this in a unique manner. </DD><P>
</DL></DD><P></DL>
<P>
We illustrate
these two conditions by considering the following PTS: <P>
<PRE>                                        ______________
                                       |              |
         A; prob 1        A; prob 1    |   B; prob 1  |
    s0 ------------&gt; s1 ------------&gt; s2 &lt;------------/
</PRE><P>
For condition (a), consider the following formula: <P>
<PRE>    prob
        true* . A
    is
        &gt;= 0
    end prob
</PRE><P>
The regular subformula "true* . A" is nondeterministic, since  it matches
both the sequence s0--A--&gt;s1--A--&gt;s2 and its proper prefix s0--A--&gt;s1. A deterministic
version of this regular subformula is "(not A)* . A". <P>
For condition (b),
consider the following formula: <P>
<PRE>    prob
        A* . (not B)* . B
    is
        &gt;= 0
    end prob
</PRE><P>
The regular subformula "A* . (not B)* . B" is nondeterministic, since it
matches the sequence s0--A--&gt;s1--A--&gt;s2--B--&gt;s2 both as "A* . B" and as "(not B)* . B". A
deterministic version of this regular subformula is "A* . (not (A or B))*
. B". <P>
The <A HREF="evaluator5.html"><B>evaluator5</B></A>
 model checker determinizes automatically the
dataless formulas, and thus the two formulas above are correctly handled.
However, the tool in its current version does not determinize data-handling
formulas, but only detects the presence of nondeterminism and signals it
by a specific warning message. It is the user's responsibility to constrain
the regular subformulas of "prob" operators so as to remove all warning
messages concerning nondeterminism, and thus to ensure the correctness
of verification. <P>
To illustrate the warning messages concerning nondeterminism,
consider the following PTS modeling a simple communication protocol: <P>
<PRE>          RCV; prob 1
     /------------------ s3
     |                    ^
     |                    | TRANS; prob 0.9
     |                    |
     v    SND; prob 1     |   ERR; prob 0.1
    s0 ----------------&gt; s1 ----------------&gt; s2
                          ^                    |
                          |                    |
                          |                    |
                          |   RETRY; prob 1    |
                          \--------------------/
</PRE><P>
and the MCL formula below, supposedly stored in a file "p.mcl" (with the
line numbers indicated for clarity): <P>
<PRE>
 1  prob
 2      SND .
 3      (
 4          (not (RETRY or RCV))* .
 5          RETRY
 6      ) { 0 ... 2 } .
 7      (not RCV)* .
 8      RCV
 9  is
10      &lt; ? 0.9999
11  end prob
</PRE><P>
This formula expresses that the probability that a message sent (action
SND) is received (action RCV) after at most two retries (action RETRY)
caused by transmission errors is less than 99,99%. The invocation of <A HREF="evaluator5.html"><B>evaluator5</B></A>

for checking this formula on the PTS above produces the following output:
<P>
<PRE>
    warning during optimisation phase:
        possibly nondeterministic probabilistic formula;
        check that the two sequences below do not overlap
        (and, if needed, ensure this by adding constraints
        on action formulas):
    SND . (* [p.mcl:2] *)
      not (RCV) (* [p.mcl:7] *)
    SND . (* [p.mcl:2] *)
      RETRY (* [p.mcl:5] *)
    1.11
    FALSE
</PRE><P>
The warning message above indicates that the regular subformula can match
a transition sequence s0--SND--&gt; ... --RETRY--&gt;s1 in two different ways, caused by the
fact that the action predicates "not (RCV)" and "RETRY" overlap (they are
both satisfied by the RETRY action). Indeed, the following transition sequence:
<P>
<PRE>    s0--SND--&gt;s1--ERR--&gt;s2--RETRY--&gt;s1--TRANS--&gt;s3--RCV--&gt;s0
</PRE><P>
in the PTS is matched by the regular subformula either as "SND . (not RCV)*
. RCV" (corresponding to 0 retries) or as "SND . (not (RETRY or RCV))* . RETRY
. (not RCV)* . RCV" (corresponding to one retry). <P>
This nondeterminism makes
the probabilities labeling the actions of this sequence to be counted twice,
which yields an incorrect value 1.11 of the probability. <P>
A deterministic
version of the formula above is obtained by replacing the subformula "(not
RCV)*" by the more constraining formula "(not (RETRY or RCV))*", which
reflects the intended meaning of the initial property (i.e., a message is
received after a number of retries between 0 and 2, these retries being
captured by the "((not (RETRY or RCV))* . RETRY) { 0 ... 2 }" subformula). This
revised formula is verified correctly, without any warning message, producing
a probability value of 0.999 and a verdict TRUE. <P>
Note: If a "prob" formula
triggers warning messages concerning nondeterminism, it is important to
eliminate <I>all</I> these warnings to achieve a correct verification. Indeed,
even if the computed probability is less than 1, the presence of such warnings
indicates an ambiguity in the formula, and thus the risk of having computed
a probability higher than the real one. 
<H2><A NAME="sect8" HREF="#sect8">Bibliography</A></H2>

<DL><DD><DL COMPACT>

<DT>[DJJL01] </DT>
<DD>P. D'Argenio,
B. Jeannet, H. Jensen, and K. Larsen. "Reachability Analysis of Probabilistic
Systems by Successive Refinements." Proceedings of the Joint Intetnational
Workshop on Process Algebra and Probabilistic Methods, Performance Modeling
and Verification PAPM/PROBMIV'01, LNCS v. 2165, p. 39-56, 2001. </DD><P>

<DT>[DV90] </DT>
<DD>R. De
Nicola and F. W. Vaandrager. "Action versus State based Logics for Transition
Systems." Proceedings Ecole de Printemps on Semantics of Concurrency, LNCS
v. 469, p. 407-419, 1990. </DD><P>

<DT>[EL86] </DT>
<DD>E. A. Emerson and C-L. Lei. "Efficient Model Checking
in Fragments of the Propositional Mu-Calculus." Proceedings of the 1st LICS,
p. 267-278, 1986. </DD><P>

<DT>[FL79] </DT>
<DD>M. J. Fischer and R. E. Ladner. "Propositional Dynamic
Logic of Regular Programs." Journal of Computer and System Sciences, no.
18, p. 194-211, 1979. </DD><P>

<DT>[HJ94] </DT>
<DD>H. Hansson and B. Jonsson. "A Logic for Reasoning
about Time and Reliability." Formal Aspects of Computing, v. 6, no. 5, p. 512-535,
1994. </DD><P>

<DT>[Koz83] </DT>
<DD>D. Kozen. "Results on the Propositional Mu-Calculus." Theoretical
Computer Science, v. 27, p. 333-354, 1983. </DD><P>

<DT>[LS91] </DT>
<DD>K. G. Larsen and A. Skou. "Bisimulation
through Probabilistic Testing." Information and Computation, v. 94, no. 1,
p. 1-28, 1991. </DD><P>

<DT>[Mat06] </DT>
<DD>R. Mateescu. "CAESAR_SOLVE: A Generic Library for On-the-Fly
Resolution of Alternation-Free Boolean Equation Systems." Springer International
Journal on Software Tools for Technology Transfer (STTT), v. 8, no. 1, p.
37-56, 2006. Full version available as INRIA Research Report RR-5948. Available
from <A HREF="http://cadp.inria.fr/publications/Mateescu-06-a.html">http://cadp.inria.fr/publications/Mateescu-06-a.html</A>
 </DD><P>

<DT>[MR18] </DT>
<DD>R. Mateescu
and J. I. Requeno. "On-the-Fly Model Checking for Extended Action-Based Probabilistic
Operators." Springer International Journal on Software Tools for Technology
Transfer (STTT), v. 20, no. 5, p. 563-587, 2018. </DD><P>

<DT>[MS13] </DT>
<DD>R. Mateescu and W. Serwe.
"Model Checking and Performance Evaluation with CADP Illustrated on Shared-Memory
Mutual Exclusion Protocols." Science of Computer Programming v. 78, no. 7,
p. 843-861, 2013. </DD><P>

<DT>[MT08] </DT>
<DD>R. Mateescu and D. Thivolle. "A Model Checking Language
for Concurrent Value-Passing Systems." Proceedings of the 15th International
Symposium on Formal Methods FM'08, LNCS v. 5014, p. 148-164, 2008. Available
from <A HREF="http://cadp.inria.fr/publications/Mateescu-Thivolle-08.html">http://cadp.inria.fr/publications/Mateescu-Thivolle-08.html</A>
 </DD><P>

<DT>[Str82] </DT>
<DD>R. S.
Streett. "Propositional Dynamic Logic of Looping and Converse." Information
and Control, v. 54, p. 121-141, 1982. </DD><P>
</DL></DD><P></DL>

<H2><A NAME="sect9" HREF="#sect9">See Also</A></H2>
<A HREF="bcg_steady.html"><B>bcg_steady</B></A>
, <A HREF="evaluator.html"><B>evaluator</B></A>
,
<A HREF="evaluator3.html"><B>evaluator3</B></A>
, <A HREF="evaluator4.html"><B>evaluator4</B></A>
, <A HREF="evaluator5.html"><B>evaluator5</B></A>
, <A HREF="mcl.html"><B>mcl</B></A>
, <A HREF="mcl3.html"><B>mcl3</B></A>
,
<A HREF="mcl4.html"><B>mcl4</B></A>
, <A HREF="regexp.html"><B>regexp</B></A>
 <P>
Additional information is available from the
CADP Web page located at <A HREF="http://cadp.inria.fr">http://cadp.inria.fr</A>
 <P>
Directives for installation
are given in files <B>$CADP/INSTALLATION_*</B>. <P>
Recent changes and improvements
to this software are reported and commented in file <B>$CADP/HISTORY</B>. 
<H2><A NAME="sect10" HREF="#sect10">Bugs</A></H2>
Please
report bugs to <A HREF="mailto:Radu.Mateescu@inria.fr?Subject=CADP-Bug-Report">Radu.Mateescu@inria.fr</A> <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">Name</A></LI>
<LI><A NAME="toc1" HREF="#sect1">Description</A></LI>
<LI><A NAME="toc2" HREF="#sect2">Probabilistic Operator</A></LI>
<LI><A NAME="toc3" HREF="#sect3">Examples of Probabilistic Properties</A></LI>
<UL>
<LI><A NAME="toc4" HREF="#sect4">Dataless Properties</A></LI>
<LI><A NAME="toc5" HREF="#sect5">Data-handling Properties</A></LI>
</UL>
<LI><A NAME="toc6" HREF="#sect6">Relation to Other Probabilistic Logics</A></LI>
<LI><A NAME="toc7" HREF="#sect7">Determinization of Probabilistic Formulas</A></LI>
<LI><A NAME="toc8" HREF="#sect8">Bibliography</A></LI>
<LI><A NAME="toc9" HREF="#sect9">See Also</A></LI>
<LI><A NAME="toc10" HREF="#sect10">Bugs</A></LI>
</UL>
</BODY></HTML>
